<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ceeqwinn Story - Chapter 1</title>
<style>
  body {
    background-color: black;
    color: white;
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
  }
  header {
    text-align: center;
    padding: 1em;
    background: linear-gradient(90deg, red, magenta, gold);
    color: white;
    font-size: 1.5em;
    font-weight: bold;
  }
  .controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 1em;
  }
  button, select {
    padding: 8px 12px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  .lang-select { background: magenta; color: white; }
  .maximize-btn { background: gold; color: black; }
  .login-btn { background: red; color: white; }
  .paragraph {
    background-color: rgba(255,255,255,0.05);
    padding: 1em;
    border-radius: 10px;
    margin: 1em;
    position: relative;
    transition: all 0.3s ease;
  }
  .comment-box {
    margin-top: 0.5em;
    padding: 0.5em;
    background-color: rgba(255,255,255,0.1);
    border-radius: 6px;
  }
  .comment-input {
    width: 80%;
    padding: 5px;
  }
  .comment-button {
    padding: 5px 10px;
    background: gold;
    color: black;
    border: none;
    cursor: pointer;
  }
  .tooltip {
    position: absolute;
    background: rgba(255,255,255,0.9);
    color: black;
    padding: 5px;
    border-radius: 5px;
    font-size: 0.8em;
    display: none;
    z-index: 10;
  }
</style>
</head>
<body>

<header>ðŸŒŸ Ceeqwinn Story - Chapter 1</header>

<div class="controls">
  <select id="languageSelect" class="lang-select">
    <option value="en">English</option>
    <option value="fr">French</option>
    <option value="xx">3rd Language</option>
  </select>
  <button id="maximizeBtn" class="maximize-btn">Maximize Text</button>
  <button id="loginBtn" class="login-btn">Login with Google</button>
</div>

<div id="story"></div>

<!-- Tooltip -->
<div id="tooltip" class="tooltip"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
  import { getFirestore, collection, addDoc, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  // Firebase setup
  const firebaseConfig = {
    apiKey: "AIzaSyBWfXYyGYW5ZuvXNQLu9oYL0hDLsnW9w-4",
    authDomain: "alteborne-story.firebaseapp.com",
    projectId: "alteborne-story",
    storageBucket: "alteborne-story.firebasestorage.app",
    messagingSenderId: "696537547705",
    appId: "1:696537547705:web:1f8d65f7d194cb631fec68",
    measurementId: "G-9BXCG8LLDQ"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  let currentUser = null;

  // ======================
  // CHAPTER TEXT STORAGE
  // ======================
  const chapters = {
    en: [
      "Once upon a time, in the city of Alteborne...",
      "The streets were alive with markets, colors, and whispers of mystery..."
    ],
    fr: [
      "Il Ã©tait une fois, dans la ville d'Alteborne...",
      "Les rues Ã©taient animÃ©es de marchÃ©s, de couleurs et de murmures mystÃ©rieux..."
    ],
    xx: [
      "3rd language version of first paragraph...",
      "3rd language version of second paragraph..."
    ]
  };
  // ======================
  // INSERT YOUR STORY:
  // - Replace text in chapters.en for English
  // - chapters.fr for French
  // - chapters.xx for your third language
  // Add as many paragraphs as you want in each array
  // ======================

  // Load story paragraphs into DOM
  function loadStory(lang) {
    const storyContainer = document.getElementById("story");
    storyContainer.innerHTML = "";
    chapters[lang].forEach((para, idx) => {
      const pDiv = document.createElement("div");
      pDiv.className = "paragraph";
      pDiv.dataset.paragraph = `${lang}-p${idx+1}`;
      pDiv.innerHTML = `
        <p>${para}</p>
        <div class="comment-box">
          <input class="comment-input" placeholder="Write a comment..." />
          <button class="comment-button">Post</button>
          <ul class="comment-list"></ul>
        </div>
      `;
      storyContainer.appendChild(pDiv);
      setupComments(pDiv, `${lang}-p${idx+1}`);
    });
  }

  // Comment system
  function setupComments(paragraphDiv, paraId) {
    const input = paragraphDiv.querySelector(".comment-input");
    const postBtn = paragraphDiv.querySelector(".comment-button");
    const list = paragraphDiv.querySelector(".comment-list");

    postBtn.addEventListener("click", async () => {
      if (!currentUser) {
        alert("Please log in to comment!");
        return;
      }
      if (input.value.trim()) {
        await addDoc(collection(db, "comments"), {
          text: input.value.trim(),
          paragraph: paraId,
          user: currentUser.displayName,
          timestamp: new Date()
        });
        input.value = "";
      }
    });

    const q = query(collection(db, "comments"), orderBy("timestamp", "desc"));
    onSnapshot(q, snapshot => {
      list.innerHTML = "";
      snapshot.forEach(doc => {
        const data = doc.data();
        if (data.paragraph === paraId) {
          const li = document.createElement("li");
          li.textContent = `${data.user}: ${data.text}`;
          list.appendChild(li);
        }
      });
    });
  }

  // Google login
  document.getElementById("loginBtn").addEventListener("click", async () => {
    const provider = new GoogleAuthProvider();
    try {
      const result = await signInWithPopup(auth, provider);
      currentUser = result.user;
      alert(`Welcome, ${currentUser.displayName}!`);
    } catch (error) {
      console.error("Login error:", error);
    }
  });

  // Language switcher
  document.getElementById("languageSelect").addEventListener("change", (e) => {
    loadStory(e.target.value);
  });

  // Maximize/minimize
  let maximized = false;
  document.getElementById("maximizeBtn").addEventListener("click", () => {
    document.querySelectorAll(".paragraph").forEach(div => {
      div.style.fontSize = maximized ? "1em" : "1.4em";
    });
    maximized = !maximized;
  });

  // Tooltip
  const tooltip = document.getElementById("tooltip");
  document.body.addEventListener("mouseover", (e) => {
    if (e.target.classList.contains("comment-button")) {
      tooltip.textContent = "Post your thoughts here!";
      tooltip.style.display = "block";
      tooltip.style.left = e.pageX + "px";
      tooltip.style.top = e.pageY + "px";
    }
  });
  document.body.addEventListener("mouseout", () => {
    tooltip.style.display = "none";
  });

  // Initial load with English
  loadStory("en");
</script>

</body>
</html>

